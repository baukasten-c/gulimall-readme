# 压力测试

1、测试结果：

| 压测内容                                 | 压测线程数 | 吞吐量/s | 90%响应时间 | 99%响应时间 |
| ---------------------------------------- | ---------- | -------- | ----------- | ----------- |
| Nginx                                    | 50         | 15324    | 6           | 15          |
| Gateway                                  | 50         | 23281    | 3           | 10          |
| 简单服务                                 | 50         | 35191    | 2           | 4           |
| Gateway+简单服务                         | 50         | 8720     | 10          | 25          |
| Nginx+Gateway+简单服务                   | 50         | 2754     | 24          | 39          |
| 首页一级菜单渲染                         | 50         | 1053     | 70          | 119         |
| 首页一级菜单渲染(开缓存)                 | 50         | 1058     | 69          | 113         |
| 首页一级菜单渲染(开缓存、用索引、关日志) | 50         | 1530     | 44          | 68          |
| 三级分类数据获取                         | 50         | 8.6      | 7232        | 7584        |
| 三级分类数据获取(开缓存、用索引、关日志) | 50         | 28.2     | 2194        | 2942        |
| 首页全量数据获取(动静分离)               | 50         | 815      | 73          | 100         |
| 首页全量数据获取(动静分离、JVM调优)      | 50         | 1062     | 54          | 73          |

2、影响性能考虑点包括：数据库、应用程序、中间件、网络和操作系统等方面。首先考虑自己的应用属于CPU密集型(需要硬件优化)还是IO密集型(需要sql优化)

3、中间件越多，性能损失越大，大多都损失在网络交互中

4、数据库优化：使用索引

5、thymeleaf模板渲染优化：使用redis缓存

6、静态资源：使用Nginx动静分离